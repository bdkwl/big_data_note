## 推荐系统
推荐系统是大数据在互联网领域的典型应用，可以通过分析用户的历史记录来了解用户喜好，从而主动为用户推荐其感兴趣的信息，满足用户的个性化推荐需求

推荐系统是自动联系用户和物品的一种工具，和搜索引擎相比，推荐系统通过研究用户的兴趣偏好，进行个性化计算。推荐系统可发现用户的兴趣点，帮助用户从海量信息中去发掘自己潜在的需求

### 长尾理论
推荐系统可以创造全新的商业和经济模式，帮助实现长尾商品的销售

”长尾“概念于2004年提出，用来描述以亚马孙为代表的电子商务网站的商业和经济模式

电子商务网站销售种类繁多，虽然绝大多数商品都不热门，但这些不热门的商品总数量极其庞大，所累计的总销售额将是一个可观的数字，也许会超过热门商品所带来的销售额

因此，通过发掘长尾商品并推荐给感兴趣的用户来提高销售额，这需要通过个性化推荐来实现

热门推荐是常用的推荐方式，广泛应用于各类网站中（如热门排行榜）。但热门推荐的主要缺陷在于推荐的范围有限，所推荐的内容在一定时期内相对固定。无法实现长尾商品的推荐

个性化推荐可通过推荐系统来实现。推荐系统通过发掘用户的行为记录，找到用户的个性化需求，发现用户潜在的消费倾向，从而将长尾商品准确地推荐给需要它的用户，进而提升销量，实现用户与商家的双赢。

### 推荐方法
推荐系统本质是建立用户与物品的联系，根据推荐算法的不同，推荐方法包括：

- 专家推荐
- 基于统计的推荐 （简单的根据系统用户的基本信息发现用户的相关程度，然后将相似用户喜爱的其他物品推荐给当前用户）
- 基于内容的推荐 （根据推荐物品或内容的元数据，发现物品或者内容的相关性，然后基于用户以往的喜好记录，推荐给用户相似的物品）
- 协同过滤推荐 （利用某兴趣相投、拥有共同经验之群体的喜好来推荐用户感兴趣的信息）
- 混合推荐（组合多个推荐算法）

### 推荐系统模型
完整的推荐系统通常包括3个组成模块：

- 用户建模模块

	对用户进行建模，根据用户行为数据和用户属性数据来分析用户的兴趣和需求

- 推荐对象建模模块

	根据对象数据对推荐对象进行建模
	
- 推荐算法模块

	基于用户特征和物品特征，采用推荐算法计算得到用户可能感兴趣的对象，并根据推荐场景对推荐结果进行一定调整，将推荐结果最终展示给用户
	
![推荐系统基本结构](https://raw.githubusercontent.com/bdkwl/big_data_note/master/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%9C%A8%E4%B8%8D%E5%90%8C%E9%A2%86%E5%9F%9F%E7%9A%84%E5%BA%94%E7%94%A8/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E6%A8%A1%E5%9E%8B.png)


### 推荐系统应用
目前推荐系统已广泛应用于电子商务、在线视频、在线音乐、社交网络等各类网站和应用中

电商：

- 亚马孙网站利用用户的浏览历史记录来为用户推荐商品，推荐的主要是用户未浏览过，但可能感兴趣、在潜在购买可能性的商品

在线音乐。音乐相比于电影数量更加庞大，个人口味偏向更为明显，仅依靠热门推荐是远远不够的：
	
- 虾米音乐根据用户的音乐收藏记录来分析用户的音乐偏好，以进行推荐。例如：推荐同一风格的歌曲或推荐同一歌手的其他歌曲

---

## 协同过滤算法
> 推荐技术从被提出到现在已有十余年，在多年的发展历程中诞生了很多新的推荐算法。协同过滤作为最早、最知名的推荐算法，不仅在学术界得到了深入研究，而且至今在业界仍有广泛的应用

协同过滤分为

1. 基于用户的协同过滤（UserCF）
	- 在1992年被提出，是推荐系统中最古老的算法
	- UserCF算法实现主要2个步骤
		1. 找到和目标用户兴趣相似的用户集合
		2. 找到该集合中的用户所喜欢的、且目标用户没有听说过的物品推荐给目标用户

	![UserCF](https://raw.githubusercontent.com/bdkwl/big_data_note/master/大数据在不同领域的应用/UserCF.png)
	
	- 实现UserCF算法的关键步骤是计算用户与用户之间的兴趣相似度。目前较多使用的相似度算法：
		- 泊松相关系数（Person Corrletaion Coefficient）
		- 余弦相似度（Cosine-based Similarity）
		- 调整余弦相似度 (Adjusted Cosine Similarity）
	- 定用户u和用户v，N(u)表示用户u感兴趣的物品集合，N(v)表示用户v感兴趣的物品集合，使用余弦相似度进行计算用户相似度公式：
	
	$$ w_{uv} = \frac{ |N(u) \cap N(v)| }{\sqrt{ |N(u)| |N(v)| }} $$

	$ w_{uv} $:用户相似度参数
	
	分母：u和v的感兴趣物品集合乘积开根号
	
	分子：u和v的感兴趣物品交集
	
	- 由于很多用户相互之间并没有对同样的物品产生过行为，因此其公式的分子为0，相似度也为0
	- 可以利用物品到用户之间的倒排表（每个物品所对应的、对该物品感兴趣的用户列表），仅对有对相同物品产生交互行为的用户进行计算
	
	![物品到用户倒排表](https://raw.githubusercontent.com/bdkwl/big_data_note/master/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%9C%A8%E4%B8%8D%E5%90%8C%E9%A2%86%E5%9F%9F%E7%9A%84%E5%BA%94%E7%94%A8/UserCF-%E7%89%A9%E5%93%81%E5%88%B0%E7%94%A8%E6%88%B7%E5%80%92%E6%8E%92%E8%A1%A8.png)
	
	- 得到用户间的相似度后，再使用下面的公式度量用户u对物品i的兴趣程序 $P_{ui}$ ：
	$$ P_{ui} = \Sigma_{v \epsilon S(u,K) \cap N(i)} w_{uv} r_{vi} $$
	
	$ S(u,K) $ 是和用户u兴趣最接近的K个用户的集合
	
	$ N(i) $ 是喜欢物品i的用户集合
	
	$ w_{uv} $ 是用户u和用户v的相似度
	
	$ r_{vi} $ 是隐反馈信息，代表用户v对物品i的感兴趣程序，为简化计算可令$ r_{vi} $ = 1
	
	- 对所有物品计算$P_{ui}$ 后，对$P_{ui}$进行降序处理，取前N个物品作为推荐结果（Top-N推荐）展示给用户u
	
	
	
2. 基于物品的协同过滤（ItemCF）

	- 基于物品的协同算法（简称ItemCF算法) 是目前业界应用最多的算法。是给目标用户推荐那些和他们之前喜欢的物品相似的物品。ItemCF算法主要通过分析用户的行为记录来计算物品之间的相似度
	- ItemCF算法基于的假设：物品A和物品B具有很大的相似度，是因为喜欢物品A的用户大多也喜欢物品B
	- ItemCF算法计算分为：
		1. 计算物品之间的相似度
		2. 根据物品的相似度和用户的历史行为，给用户生成推荐列表
	- IitemCF计算的是物品相似度，使用下面公式来度量用户u对物品j的兴趣程度 $P_{uj}$ （与UserCF类似）

	$$ P_{uj} = \Sigma_{v \epsilon N(u) \cap S(j,K) } w_{ji} r_{vi} $$
	
	$ S(j,K)  $ 是和物品j最相似的K个物品的集合
	
	$ N(u) $ 是用户u喜欢的物品集合
	
	$ w_{ji} $ 是物品i和物品j的相似度
	
	$ r_{vi} $ 是隐反馈信息，代表用户v对物品i的感兴趣程序，为简化计算可令$ r_{vi} $ = 1
	
--- 

### UserCF算法和ItemCF算法对比	

- UserCF算法推荐的是和目标用户有共同兴趣爱好的其他用户所喜欢的物品
- ItemCF算法推荐的是和目标用户之前喜欢的物品类似的其他物品
- UserCF算法的推荐更偏向社会化
	- 适合应用于新闻推荐、微博话题推荐等应用场景。其推荐效果在新颖性方面有一定优势
	- 缺点：随着用户数量增大，用户相似度计算复杂度越来越高。而且UserCF推荐结果相关性较弱，难以对推荐结果作出解释，容易受大众影响而推荐热门物品
- ItemCF算法的推荐更偏向个性化
	- 适合用户电子商务、电影、图书等应用场景。可以利用用户的历史行为给推荐结果作出解释，让用户更为信服推荐的效果
	- 缺点：倾向于推荐与用户已购买商品相似的商品，会出现多样性不足、推荐新颖度较低的问题











